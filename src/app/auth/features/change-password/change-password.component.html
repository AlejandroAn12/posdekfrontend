<app-header
  [title]="titleComponent"
  [subtitle]="subtitleComponent"
></app-header>

<div class="bg-white dark:bg-gray-800 p-5">
  <div class="max-w-xl mx-auto dark:bg-gray-900 p-6">
  <form [formGroup]="form" (ngSubmit)="changePassword()">
    <!-- Contraseña actual -->
    <div class="mb-5">
      <label
        for="currentPassword"
        class="text-sm font-semibold text-gray-500 dark:text-white block mb-1"
      >
        Contraseña actual
      </label>
      <input
        formControlName="currentPassword"
        placeholder="Ingrese su contraseña actual"
        type="password"
        id="currentPassword"
        class="rounded text-sm p-2 block w-full border border-gray-300 dark:bg-gray-800 dark:border-gray-600 dark:text-white"
      />
    </div>

    <!-- Nueva contraseña -->
    <div class="mb-5">
      <label
        for="newPassword"
        class="text-sm font-semibold text-gray-500 dark:text-white block mb-1"
      >
        Nueva contraseña
      </label>
      <input
        formControlName="newPassword"
        placeholder="Ingrese su nueva contraseña"
        type="password"
        id="newPassword"
        class="rounded text-sm p-2 block w-full border border-gray-300 dark:bg-gray-800 dark:border-gray-600 dark:text-white"
      />
      <div
        *ngIf="
          form.get('newPassword')?.touched && form.get('newPassword')?.invalid
        "
        class="text-red-500 text-xs mt-1"
      >
        <div *ngIf="form.get('newPassword')?.errors?.['required']">
          La nueva contraseña es obligatoria
        </div>
        <div *ngIf="form.get('newPassword')?.errors?.['minlength']">
          Debe tener al menos 6 caracteres
        </div>
        <div *ngIf="form.get('newPassword')?.errors?.['maxlength']">
          No debe exceder los 20 caracteres
        </div>
      </div>
    </div>

    <!-- Confirmar nueva contraseña -->
    <div class="mb-5">
      <label
        for="confirmPassword"
        class="text-sm font-semibold text-gray-500 dark:text-white block mb-1"
      >
        Confirmar contraseña
      </label>
      <input
        formControlName="confirmPassword"
        placeholder="Confirme su nueva contraseña"
        type="password"
        id="confirmPassword"
        class="rounded text-sm p-2 block w-full border border-gray-300 dark:bg-gray-800 dark:border-gray-600 dark:text-white"
      />
      <div
        *ngIf="
          form.get('confirmPassword')?.touched &&
          form.get('confirmPassword')?.invalid
        "
        class="text-red-500 text-xs mt-1"
      >
        <div *ngIf="form.get('confirmPassword')?.errors?.['required']">
          Debe confirmar la contraseña
        </div>
        <div *ngIf="form.get('confirmPassword')?.errors?.['mismatch']">
          Las contraseñas no coinciden
        </div>
      </div>
    </div>

    <!-- Botones -->
    <div class="flex justify-end gap-3 mt-6">
      <button
      (click)="routerBack()"
        type="button"
        class="text-gray-600 dark:text-white bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-md text-sm font-semibold px-5 py-2"
      >
        Cancelar
      </button>
      <button
        type="submit"
        class="bg-blue-600 text-white text-sm font-semibold rounded-md px-5 py-2 hover:bg-blue-700"
      >
        <i class="fa-solid fa-floppy-disk mr-1"></i>
        Cambiar contraseña
      </button>
    </div>
  </form>
</div>
</div>
