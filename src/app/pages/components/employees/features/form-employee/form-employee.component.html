<app-header [title]="titleComponent" [subtitle]="subtitleComponent" [isUpdate]="isUpdate"></app-header>

<div class="bg-white dark:bg-gray-900 min-h-screen py-6 px-4 sm:px-6 lg:px-8">
  <div class="max-w-2xl mx-auto">
    <!-- Encabezado de sección -->
    <div class="mb-8">
      <h1 class="text-2xl font-bold text-gray-800 dark:text-white">Detalles del Colaborador</h1>
      <p class="text-gray-500 dark:text-gray-400 mt-2">Complete la información requerida para {{ isUpdate ? 'actualizar' : 'registrar' }} el empleado</p>
    </div>

    <!-- Formulario -->
    <form [formGroup]="form" class="space-y-6 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
      <!-- Fila: Código de empleado y Documento de identificación -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Código de empleado (solo en modo actualización) -->
        <div *ngIf="isUpdate" class="space-y-2">
          <label for="codeEmployee" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
            Código de empleado
          </label>
          <input
            formControlName="codeEmployee"
            placeholder="Código de empleado"
            type="text"
            id="codeEmployee"
            [ngClass]="{
              'border-red-500': f['codeEmployee'].invalid && f['codeEmployee'].touched,
              'border-green-500': f['codeEmployee'].valid && f['codeEmployee'].touched
            }"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500"
          />
        </div>

        <!-- Documento de identificación -->
        <div class="space-y-2">
          <label for="dni" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
            Documento de identificación *
          </label>
          <input
            formControlName="dni"
            placeholder="0800000000"
            type="text"
            id="dni"
            [ngClass]="{
              'border-red-500': f['dni'].invalid && f['dni'].touched,
              'border-green-500': f['dni'].valid && f['dni'].touched
            }"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500"
          />
          <div *ngIf="f['dni'].invalid && f['dni'].touched" class="text-red-500 text-sm flex items-center mt-1">
            <i class="fa-solid fa-circle-exclamation mr-1"></i>
            El documento de identificación es obligatorio.
          </div>
        </div>
      </div>

      <!-- Fila: Nombres y Apellidos -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Nombres completos -->
        <div class="space-y-2">
          <label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
            Nombres completos *
          </label>
          <input
            formControlName="name"
            placeholder="Nombres completos"
            type="text"
            id="name"
            [ngClass]="{
              'border-red-500': f['name'].invalid && f['name'].touched,
              'border-green-500': f['name'].valid && f['name'].touched
            }"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500"
          />
          <div *ngIf="f['name'].invalid && f['name'].touched" class="text-red-500 text-sm flex items-center mt-1">
            <i class="fa-solid fa-circle-exclamation mr-1"></i>
            Los nombres completos son obligatorios.
          </div>
        </div>

        <!-- Apellidos completos -->
        <div class="space-y-2">
          <label for="surname" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
            Apellidos completos *
          </label>
          <input
            formControlName="surname"
            placeholder="Apellidos completos"
            type="text"
            id="surname"
            [ngClass]="{
              'border-red-500': f['surname'].invalid && f['surname'].touched,
              'border-green-500': f['surname'].valid && f['surname'].touched
            }"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500"
          />
          <div *ngIf="f['surname'].invalid && f['surname'].touched" class="text-red-500 text-sm flex items-center mt-1">
            <i class="fa-solid fa-circle-exclamation mr-1"></i>
            Los apellidos completos son obligatorios.
          </div>
        </div>
      </div>

      <!-- Fila: Teléfono y Correo electrónico -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Teléfono -->
        <div class="space-y-2">
          <label for="tlf" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
            Teléfono *
          </label>
          <input
            formControlName="tlf"
            placeholder="+593 999 999 999"
            type="tel"
            id="tlf"
            [ngClass]="{
              'border-red-500': f['tlf'].invalid && f['tlf'].touched,
              'border-green-500': f['tlf'].valid && f['tlf'].touched
            }"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500"
          />
          <div *ngIf="f['tlf'].invalid && f['tlf'].touched" class="text-red-500 text-sm flex items-center mt-1">
            <i class="fa-solid fa-circle-exclamation mr-1"></i>
            Debe registrar un número de contacto.
          </div>
        </div>

        <!-- Correo electrónico -->
        <div class="space-y-2">
          <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
            Correo electrónico *
          </label>
          <input
            formControlName="email"
            placeholder="email@example.com"
            type="email"
            id="email"
            [ngClass]="{
              'border-red-500': f['email'].invalid && f['email'].touched,
              'border-green-500': f['email'].valid && f['email'].touched
            }"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500"
          />
          <div *ngIf="f['email'].invalid && f['email'].touched" class="text-red-500 text-sm flex items-center mt-1">
            <i class="fa-solid fa-circle-exclamation mr-1"></i>
            Debe registrar un correo electrónico válido.
          </div>
        </div>
      </div>

      <!-- Dirección domiciliaria -->
      <div class="space-y-2">
        <label for="address" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
          Dirección domiciliaria
        </label>
        <input
          formControlName="address"
          type="text"
          id="address"
          placeholder="Dirección domiciliaria"
          class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500"
        />
      </div>

      <!-- Botones de acción -->
      <div class="flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700">
        <button
          type="button"
          (click)="btnBack()"
          class="px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors duration-200 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600"
        >
          Cancelar
        </button>
        <button
          type="submit"
          (click)="saveEmployee()"
          [disabled]="form.invalid"
          [ngClass]="{
            'opacity-70 cursor-not-allowed': form.invalid,
            'hover:bg-blue-700 cursor-pointer': form.valid
          }"
          class="px-5 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg focus:ring-4 focus:ring-blue-300 focus:outline-none transition-colors duration-200 flex items-center gap-2"
        >
          <i class="fa-solid fa-floppy-disk"></i>
          {{ isUpdate ? "Guardar cambios" : "Guardar" }}
        </button>
      </div>
    </form>
  </div>
</div>